"use strict";(globalThis.webpackChunkreact_gh_pages=globalThis.webpackChunkreact_gh_pages||[]).push([[9815],{6388:(e,t,o)=>{o.d(t,{Fp:()=>a,RL:()=>f,UV:()=>c,bk:()=>s});var i=o(46228),r=o(77981),n=o(691);function a(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":{const t=e.symbolLayers;return t&&1===t.length?a(t[0]):null}case"CIMVectorMarker":{var t;const o=e.markerGraphics;if(!o||1!==o.length)return null;const i=o[0];if(!i)return null;const r=i.geometry;if(!r)return null;const n=i.symbol;return!n||"CIMPolygonSymbol"!==n.type&&"CIMLineSymbol"!==n.type||null!=(t=n.symbolLayers)&&t.some((e=>!!e.effects))?null:{geom:r,asFill:"CIMPolygonSymbol"===n.type}}case"sdf":return{geom:e.geom,asFill:e.asFill}}return null}function l(e){let t=1/0,o=-1/0,i=1/0,r=-1/0;for(const n of e)for(const e of n)e[0]<t&&(t=e[0]),e[0]>o&&(o=e[0]),e[1]<i&&(i=e[1]),e[1]>r&&(r=e[1]);return[t,i,o,r]}function s(e){return e?e.rings?l(e.rings):e.paths?l(e.paths):(0,r.YX)(e)?[e.xmin,e.ymin,e.xmax,e.ymax]:null:null}function c(e,t,o,i,r){const[n,a,l,s]=e;if(l<n||s<a)return[0,0,0];const c=l-n,f=s-a,m=Math.floor(31.5),u=(128-2*(m+1))/Math.max(c,f),h=Math.round(c*u)+2*m,p=Math.round(f*u)+2*m;let y=1;t&&(y=p/u/(t.ymax-t.ymin));let g=0,d=0;if(i)if(r){if(t&&o&&t.ymax-t.ymin>0){const e=(t.xmax-t.xmin)/(t.ymax-t.ymin);g=i.x/(o*e),d=i.y/o}}else g=i.x,d=i.y;return g=.5*(t.xmax+t.xmin)+g*(t.xmax-t.xmin),d=.5*(t.ymax+t.ymin)+d*(t.ymax-t.ymin),g-=n,d-=a,g*=u,d*=u,g+=m,d+=m,[y,g/h-.5,-(d/p-.5)]}function f(e){const t=function(e){return e?e.rings?e.rings:e.paths?e.paths:void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:null:null}(e.geom),o=function(e){let t=1/0,o=-1/0,i=1/0,r=-1/0;for(const n of e)for(const e of n)e[0]<t&&(t=e[0]),e[0]>o&&(o=e[0]),e[1]<i&&(i=e[1]),e[1]>r&&(r=e[1]);return new n.Z(t,i,o-t,r-i)}(t),i=Math.floor(31.5),r=(128-2*(i+1))/Math.max(o.width,o.height),a=Math.round(o.width*r)+2*i,l=Math.round(o.height*r)+2*i,s=[];for(const n of t)if(n&&n.length>1){const t=[];for(const a of n){let[n,l]=a;n-=o.x,l-=o.y,n*=r,l*=r,n+=i-.5,l+=i-.5,e.asFill?t.push([n,l]):t.push([Math.round(n),Math.round(l)])}if(e.asFill){const e=t.length-1;t[0][0]===t[e][0]&&t[0][1]===t[e][1]||t.push(t[0])}s.push(t)}const c=function(e,t,o,i){const r=t*o,n=new Array(r),a=i*i+1;for(let l=0;l<r;++l)n[l]=a;for(const l of e){const e=l.length;for(let r=1;r<e;++r){const e=l[r-1],a=l[r];let s,c,f,m;e[0]<a[0]?(s=e[0],c=a[0]):(s=a[0],c=e[0]),e[1]<a[1]?(f=e[1],m=a[1]):(f=a[1],m=e[1]);let u=Math.floor(s)-i,h=Math.floor(c)+i,p=Math.floor(f)-i,y=Math.floor(m)+i;u<0&&(u=0),h>t&&(h=t),p<0&&(p=0),y>o&&(y=o);const g=a[0]-e[0],d=a[1]-e[1],N=g*g+d*d;for(let i=u;i<h;i++)for(let r=p;r<y;r++){let l,s,c=(i-e[0])*g+(r-e[1])*d;c<0?(l=e[0],s=e[1]):c>N?(l=a[0],s=a[1]):(c/=N,l=e[0]+c*g,s=e[1]+c*d);const f=(i-l)*(i-l)+(r-s)*(r-s),m=(o-r-1)*t+i;f<n[m]&&(n[m]=f)}}}for(let l=0;l<r;++l)n[l]=Math.sqrt(n[l]);return n}(s,a,l,i);return e.asFill&&function(e,t,o,i,r){for(const n of e){const e=n.length;for(let a=1;a<e;++a){const e=n[a-1],l=n[a];let s,c,f,m;e[0]<l[0]?(s=e[0],c=l[0]):(s=l[0],c=e[0]),e[1]<l[1]?(f=e[1],m=l[1]):(f=l[1],m=e[1]);let u=Math.floor(s),h=Math.floor(c)+1,p=Math.floor(f),y=Math.floor(m)+1;u<i&&(u=i),h>t-i&&(h=t-i),p<i&&(p=i),y>o-i&&(y=o-i);for(let n=p;n<y;++n){if(e[1]>n==l[1]>n)continue;const a=(o-n-1)*t;for(let t=u;t<h;++t)t<(l[0]-e[0])*(n-e[1])/(l[1]-e[1])+e[0]&&(r[a+t]=-r[a+t]);for(let e=i;e<u;++e)r[a+e]=-r[a+e]}}}}(s,a,l,i,c),[m(c,i),a,l]}function m(e,t){const o=2*t,r=e.length,n=new Uint8Array(4*r);for(let a=0;a<r;++a){const t=.5-e[a]/o;(0,i.I)(t,n,4*a)}return n}},79815:(e,t,o)=>{o.d(t,{S:()=>U,c:()=>O});var i=o(51995),r=o(84652),n=o(32718),a=o(92026),l=o(17842),s=o(643),c=o(819),f=o(78915),m=o(48202),u=o(6388),h=o(31027),p=o(95954),y=o(91935),g=o(88750);const d=n.Z.getLogger("esri.symbols.cim.cimAnalyzer");function N(e){switch(e){case"Butt":return m.RL.BUTT;case"Square":return m.RL.SQUARE;default:return m.RL.ROUND}}function v(e){switch(e){case"Bevel":return m.AH.BEVEL;case"Miter":return m.AH.MITER;default:return m.AH.ROUND}}function S(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function b(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function C(e,t,o,i){let r;e[t]?r=e[t]:(r={},e[t]=r),r[o]=i}function k(e){const t=e.markerPlacement;return t&&t.angleToLine?m.v2.MAP:m.v2.SCREEN}async function O(e,t,o,i,r){const n=null!=i?i:[];if(!e)return n;let a,l;const s={};if("CIMSymbolReference"!==e.type)return d.error("Expect cim type to be 'CIMSymbolReference'"),n;if(a=e.symbol,l=e.primitiveOverrides,l){const e=[];for(const o of l){const i=o.valueExpressionInfo;if(i&&t){const r=i.expression,n=(0,c.Yi)(r,t.spatialReference,t.fields).then((e=>{e&&C(s,o.primitiveName,o.propertyName,e)}));e.push(n)}else null!=o.value&&C(s,o.primitiveName,o.propertyName,o.value)}e.length>0&&await Promise.all(e)}const u=[];switch(D(a,o,u),u.length>0&&await Promise.all(u),a.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":!function(e,t,o,i,r,n,a){if(!e)return;const l=e.symbolLayers;if(!l)return;const s=e.effects;let c;const u=f.B$.getSize(e);"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(c=m.v2.MAP);let h=l.length;for(;h--;){const m=l[h];if(!m||!1===m.enable)continue;let p;s&&s.length&&(p=[...s]);const y=m.effects;y&&y.length&&(s?p.push(...y):p=[...y]);const g=[];let N;f.E0.findEffectOverrides(p,t,g),N=g.length>0?T(p,g,o,i):p;const v=[];switch(f.E0.findApplicableOverrides(m,t,v),m.type){case"CIMSolidFill":P(m,N,o,v,i,r);break;case"CIMPictureFill":M(m,N,o,v,i,n,r);break;case"CIMHatchFill":x(m,N,o,v,i,r);break;case"CIMGradientFill":w(m,N,o,v,i,r);break;case"CIMSolidStroke":L(m,N,o,v,i,r,"CIMPolygonSymbol"===e.type,u);break;case"CIMPictureStroke":A(m,N,o,v,i,r,"CIMPolygonSymbol"===e.type,u);break;case"CIMGradientStroke":I(m,N,o,v,i,r,"CIMPolygonSymbol"===e.type,u);break;case"CIMCharacterMarker":if(X(m,N,o,v,i,r))break;break;case"CIMPictureMarker":if(X(m,N,o,v,i,r))break;"CIMLineSymbol"===e.type&&(c=k(m)),z(m,N,o,v,i,n,r,c,u);break;case"CIMVectorMarker":if(X(m,N,o,v,i,r))break;"CIMLineSymbol"===e.type&&(c=k(m)),$(m,N,o,v,i,r,n,c,u,a);break;default:d.error("Cannot analyze CIM layer",m.type)}}}(a,l,s,t,n,o,r)}return n}function P(e,t,o,i,r,n){const a=e.primitiveName,l=(0,h.NO)(e.color),[c,f]=W(i,a,t,null),m=(0,s.hP)(JSON.stringify(e)+f).toString();n.push({type:"fill",templateHash:m,materialHash:c?()=>m:m,cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:F(a,o,"Color",r,l,E),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:t})}function M(e,t,o,i,r,n,l){const c=e.primitiveName,f=e.tintColor?(0,h.NO)(e.tintColor):{r:255,g:255,b:255,a:1},[m,u]=W(i,c,t,null),p=(0,s.hP)(JSON.stringify(e)+u).toString(),y=(0,s.hP)(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString();let g=(0,h.NA)(e.scaleX);if("width"in e){const t=e.width;let o=1;const i=n.getResource(e.url);(0,a.pC)(i)&&(o=i.width/i.height),g/=o*(e.height/t)}l.push({type:"fill",templateHash:p,materialHash:m?()=>y:y,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,color:F(c,o,"TintColor",r,f,E),height:F(c,o,"Height",r,e.height),scaleX:F(c,o,"ScaleX",r,g),angle:F(c,o,"Rotation",r,(0,h.NA)(e.rotation)),offsetX:F(c,o,"OffsetX",r,(0,h.NA)(e.offsetX)),offsetY:F(c,o,"OffsetY",r,(0,h.NA)(e.offsetY)),url:e.url})}function x(e,t,o,i,r,n){const a=["Rotation","OffsetX","OffsetY"],l=i.filter((t=>t.primitiveName!==e.primitiveName&&-1===a.indexOf(t.propertyName))),c=e.primitiveName,[f,m]=W(i,c,t,null),u=(0,s.hP)(JSON.stringify(e)+m).toString(),p=(0,s.hP)(`${e.separation}${JSON.stringify(e.lineSymbol)}`).toString();n.push({type:"fill",templateHash:u,materialHash:f?G(p,o,l,r):p,cim:e,materialOverrides:l,colorLocked:e.colorLocked,effects:t,color:{r:255,g:255,b:255,a:1},height:F(c,o,"Separation",r,e.separation),scaleX:1,angle:F(c,o,"Rotation",r,(0,h.NA)(e.rotation)),offsetX:F(c,o,"OffsetX",r,(0,h.NA)(e.offsetX)),offsetY:F(c,o,"OffsetY",r,(0,h.NA)(e.offsetY))})}function w(e,t,o,i,r,n){const a=e.primitiveName,[l,c]=W(i,a,t,null),f=(0,s.hP)(JSON.stringify(e)+c).toString();n.push({type:"fill",templateHash:f,materialHash:l?G(f,o,i,r):f,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function L(e,t,o,i,r,n,a,l){const c=e.primitiveName,f=(0,h.NO)(e.color),m=void 0!==e.width?e.width:4,u=N(e.capStyle),p=v(e.joinStyle),y=e.miterLimit,[g,d]=W(i,c,t,null),S=(0,s.hP)(JSON.stringify(e)+d).toString();let b,C;if(t&&t instanceof Array&&t.length>0){const e=t[t.length-1];if("CIMGeometricEffectDashes"===e.type&&"NoConstraint"===e.lineDashEnding&&null===e.offsetAlongLine){const e=(t=[...t]).pop();b=e.dashTemplate,C=e.scaleDash}}n.push({type:"line",templateHash:S,materialHash:g?()=>S:S,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:t,color:F(c,o,"Color",r,f,E),width:F(c,o,"Width",r,m),cap:F(c,o,"CapStyle",r,u),join:F(c,o,"JoinStyle",r,p),miterLimit:F(c,o,"MiterLimit",r,y),referenceWidth:l,zOrder:Y(e.name),dashTemplate:b,scaleDash:C})}function A(e,t,o,i,r,n,a,l){const c=(0,s.hP)(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),f=e.primitiveName,m=(0,h.NO)(e.tintColor),u=void 0!==e.width?e.width:4,p=N(e.capStyle),y=v(e.joinStyle),g=e.miterLimit,[d,S]=W(i,f,t,null),b=(0,s.hP)(JSON.stringify(e)+S).toString();n.push({type:"line",templateHash:b,materialHash:d?()=>c:c,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:t,color:F(f,o,"TintColor",r,m,E),width:F(f,o,"Width",r,u),cap:F(f,o,"CapStyle",r,p),join:F(f,o,"JoinStyle",r,y),miterLimit:F(f,o,"MiterLimit",r,g),referenceWidth:l,zOrder:Y(e.name),dashTemplate:null,scaleDash:!1,url:e.url})}function I(e,t,o,i,r,n,a,l){const c=e.primitiveName,f=void 0!==e.width?e.width:4,m=N(e.capStyle),u=v(e.joinStyle),h=e.miterLimit,[p,y]=W(i,c,t,null),g=(0,s.hP)(JSON.stringify(e)+y).toString();n.push({type:"line",templateHash:g,materialHash:p?G(g,o,i,r):g,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},width:F(c,o,"Width",r,f),cap:F(c,o,"CapStyle",r,m),join:F(c,o,"JoinStyle",r,u),miterLimit:F(c,o,"MiterLimit",r,h),referenceWidth:l,zOrder:Y(e.name),dashTemplate:null,scaleDash:!1})}function X(e,t,o,i,r,n){const a=e.markerPlacement;if(!a||"CIMMarkerPlacementInsidePolygon"!==a.type)return!1;const l=a,c=["Rotation","OffsetX","OffsetY"],f=i.filter((t=>t.primitiveName!==e.primitiveName&&-1===c.indexOf(t.propertyName))),m="url"in e?e.url:null,[u,p]=W(i,l.primitiveName,t,null),y=(0,s.hP)(JSON.stringify(e)+p).toString();let g=l.stepY,d=null,N=1;return a.shiftOddRows&&(g*=2,d=function(e){return e?2*e:0},N=.5),n.push({type:"fill",templateHash:y,materialHash:u?G(y,o,f,r):y,cim:e,materialOverrides:f,colorLocked:e.colorLocked,effects:t,color:{r:255,g:255,b:255,a:1},height:F(l.primitiveName,o,"StepY",r,g,d),scaleX:N,angle:F(l.primitiveName,o,"GridAngle",r,l.gridAngle),offsetX:F(l.primitiveName,o,"OffsetX",r,(0,h.NA)(l.offsetX)),offsetY:F(l.primitiveName,o,"OffsetY",r,(0,h.NA)(l.offsetY)),url:m}),!0}function z(e,t,o,i,r,n,l,c,f){var m;const u=e.primitiveName,p=(0,h.NA)(e.size);let y=(0,h.NA)(e.scaleX);const g=(0,h.NA)(e.rotation),d=(0,h.NA)(e.offsetX),N=(0,h.NA)(e.offsetY),v=e.tintColor?(0,h.NO)(e.tintColor):{r:255,g:255,b:255,a:1},S=(0,s.hP)(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),b=B(e.markerPlacement,i,o,r),[C,k]=W(i,u,t,b),O=(0,s.hP)(JSON.stringify(e)+k).toString(),P=null!=(m=e.anchorPoint)?m:{x:0,y:0};if("width"in e){const t=e.width;let o=1;const i=n.getResource(e.url);(0,a.pC)(i)&&(o=i.width/i.height),y/=o*(p/t)}l.push({type:"marker",templateHash:O,materialHash:C?()=>S:S,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:!1,alignment:c,size:F(u,o,"Size",r,p),scaleX:F(u,o,"ScaleX",r,y),rotation:F(u,o,"Rotation",r,g),offsetX:F(u,o,"OffsetX",r,d),offsetY:F(u,o,"OffsetY",r,N),color:F(u,o,"TintColor",r,v,E),anchorPoint:{x:P.x,y:-P.y},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:f,sizeRatio:1,markerPlacement:e.markerPlacement,url:e.url})}function $(e,t,o,i,r,n,a,l,s,c){const f=e.markerGraphics;if(!f)return;let m=0;if(e.scaleSymbolsProportionally){const t=e.frame;t&&(m=t.ymax-t.ymin)}const u=B(e.markerPlacement,i,o,r);for(const h of f)if(h){const f=h.symbol;if(!f)continue;switch(f.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":R(e,t,u,h,i,o,r,n,a,l,s,m,c);break;case"CIMTextSymbol":J(e,t,u,h,o,i,r,n,l,s,m)}}}function J(e,t,o,i,r,n,a,l,c,m,u){f.E0.findApplicableOverrides(i,n,[]);const p=i.geometry;if(!("x"in p)||!("y"in p))return;const y=i.symbol,d=function(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}(y),N=function(e){let t="",o="";if(e){const i=e.toLowerCase();-1!==i.indexOf("italic")?t="italic":-1!==i.indexOf("oblique")&&(t="oblique"),-1!==i.indexOf("bold")?o="bold":-1!==i.indexOf("light")&&(o="lighter")}return{style:t,weight:o}}(y.fontStyleName),v=(0,g.BN)(y.fontFamilyName);y.font={family:v,decoration:d,...N};const C=e.frame,k=p.x-.5*(C.xmin+C.xmax),O=p.y-.5*(C.ymin+C.ymax),P=e.size/u,M=e.primitiveName,x=(0,h.NA)(y.height)*P,w=(0,h.NA)(y.angle),L=(0,h.NA)(e.offsetX)+((0,h.NA)(y.offsetX)+k)*P,A=(0,h.NA)(e.offsetY)+((0,h.NA)(y.offsetY)+O)*P,I=(0,h.NO)(f.B$.getFillColor(y));let X=(0,h.NO)(f.B$.getStrokeColor(y)),z=f.B$.getStrokeWidth(y);z||(X=(0,h.NO)(f.B$.getFillColor(y.haloSymbol)),z=y.haloSize*P);const[$,J]=W(n,M,t,o),R=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),H=(0,s.hP)(JSON.stringify(i)+R+J).toString();let Y=F(i.primitiveName,r,"TextString",a,i.textString,h.X3,y.textCase);if(null==Y)return;const{fontStyleName:E}=y,T=v+(E?"-"+E.toLowerCase():"-regular"),B=T;"string"==typeof Y&&Y.indexOf("[")>-1&&y.fieldMap&&(Y=(0,h.Qs)(y.fieldMap,Y,y.textCase)),l.push({type:"text",templateHash:H,materialHash:$||"function"==typeof Y||Y.match(/\[(.*?)\]/)?(e,t,o)=>B+"-"+(0,h.hf)(Y,e,t,o):B+"-"+(0,s.hP)(Y),cim:y,materialOverrides:null,colorLocked:e.colorLocked,effects:t,alignment:c,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:T,decoration:d,weight:F(M,r,"Weight",a,N.weight),style:F(M,r,"Size",a,N.style),size:F(M,r,"Size",a,x),angle:F(M,r,"Rotation",a,w),offsetX:F(M,r,"OffsetX",a,L),offsetY:F(M,r,"OffsetY",a,A),horizontalAlignment:S(y.horizontalAlignment),verticalAlignment:b(y.verticalAlignment),text:Y,color:I,outlineColor:X,outlineSize:z,referenceSize:m,sizeRatio:1,markerPlacement:o})}function R(e,t,o,i,r,n,l,c,m,y,g,d,N){const v=i.symbol,S=v.symbolLayers;if(!S)return;if(N)return void H(e,t,o,i,n,r,l,c,m,y,g,d);let b=S.length;if(Z(S))return void function(e,t,o,i,r,n,a,l,c,m,p,y){const g=i.geometry,d=r[0],N=r[1],v=(0,u.bk)(g);if(!v)return;const[S,b,C]=(0,u.UV)(v,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),k={type:"sdf",geom:g,asFill:!0},O=e.primitiveName,P=(0,h.NA)(e.size),M=(0,h.NA)(e.rotation),x=(0,h.NA)(e.offsetX),w=(0,h.NA)(e.offsetY),L=N.path,A=N.primitiveName,I=d.primitiveName,X=(0,h.NO)(f.B$.getFillColor(N)),z=(0,h.NO)(f.B$.getStrokeColor(d)),$=f.B$.getStrokeWidth(d);let J=!1,R="";for(const s of n)s.primitiveName!==A&&s.primitiveName!==I&&s.primitiveName!==O||(void 0!==s.value?R+=`-${s.primitiveName}-${s.propertyName}-${JSON.stringify(s.value)}`:s.valueExpressionInfo&&(J=!0));const H=JSON.stringify({...e,markerGraphics:null}),Y=(0,s.hP)(JSON.stringify(k)+L).toString(),T={type:"marker",templateHash:(0,s.hP)(JSON.stringify(i)+JSON.stringify(N)+JSON.stringify(d)+H+R).toString(),materialHash:J?()=>Y:Y,cim:k,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:m,anchorPoint:{x:b,y:C},isAbsoluteAnchorPoint:!1,size:F(e.primitiveName,a,"Size",l,P),rotation:F(e.primitiveName,a,"Rotation",l,M),offsetX:F(e.primitiveName,a,"OffsetX",l,x),offsetY:F(e.primitiveName,a,"OffsetY",l,w),scaleX:1,frameHeight:y,rotateClockwise:e.rotateClockwise,referenceSize:p,sizeRatio:S,color:F(A,a,"Color",l,X,E),outlineColor:F(I,a,"Color",l,z,E),outlineWidth:F(I,a,"Width",l,$),markerPlacement:o,path:L};c.push(T)}(e,t,o,i,S,r,n,l,c,y,g,d);const C=p.j.applyEffects(v.effects,i.geometry,m.geometryEngine);if(C)for(;b--;){const N=S[b];if(N&&!1!==N.enable)switch(N.type){case"CIMSolidFill":case"CIMSolidStroke":{var k;const v=p.j.applyEffects(N.effects,C,m.geometryEngine),S=(0,u.bk)(v);if(!S)continue;const[b,O,P]=(0,u.UV)(S,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),M="CIMSolidFill"===N.type,x={type:"sdf",geom:v,asFill:M},w=e.primitiveName,L=null!=(k=(0,h.NA)(e.size))?k:10,A=(0,h.NA)(e.rotation),I=(0,h.NA)(e.offsetX),X=(0,h.NA)(e.offsetY),z=N.path,$=N.primitiveName,J=(0,h.NO)(M?f.B$.getFillColor(N):f.B$.getStrokeColor(N)),R=M?{r:0,g:0,b:0,a:0}:(0,h.NO)(f.B$.getStrokeColor(N)),H=f.B$.getStrokeWidth(N);if(!M&&!H)break;let Y=!1,T="";for(const e of r)e.primitiveName!==$&&e.primitiveName!==w||(void 0!==e.value?T+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(Y=!0));(0,a.pC)(t)&&"function"==typeof t&&(Y=!0);const B=JSON.stringify({...e,markerGraphics:null}),G=(0,s.hP)(JSON.stringify(x)+z).toString(),U={type:"marker",templateHash:(0,s.hP)(JSON.stringify(i)+JSON.stringify(N)+B+T).toString(),materialHash:Y?()=>G:G,cim:x,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:y,anchorPoint:{x:O,y:P},isAbsoluteAnchorPoint:!1,size:F(e.primitiveName,n,"Size",l,L),rotation:F(e.primitiveName,n,"Rotation",l,A),offsetX:F(e.primitiveName,n,"OffsetX",l,I),offsetY:F(e.primitiveName,n,"OffsetY",l,X),scaleX:1,frameHeight:d,rotateClockwise:e.rotateClockwise,referenceSize:g,sizeRatio:b,color:F($,n,"Color",l,J,E),outlineColor:F($,n,"Color",l,R,E),outlineWidth:F($,n,"Width",l,H),markerPlacement:o,path:z};c.push(U);break}default:H(e,t,o,i,n,r,l,c,m,y,g,d)}}}function H(e,t,o,i,r,n,c,m,u,p,y,g){const d=function(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath}}(e,i);let N=[];const v=["Rotation","OffsetX","OffsetY"];N=n.filter((t=>t.primitiveName!==e.primitiveName||-1===v.indexOf(t.propertyName)));let S="";for(const a of n)void 0!==a.value&&(S+=`-${a.primitiveName}-${a.propertyName}-${JSON.stringify(a.value)}`);const[b,C,k]=f.B$.getTextureAnchor(d,u),O=e.primitiveName,P=(0,h.NA)(e.rotation),M=(0,h.NA)(e.offsetX),x=(0,h.NA)(e.offsetY),w=(0,s.hP)(JSON.stringify(d)+S).toString(),L={type:"marker",templateHash:w,materialHash:N.length>0||(0,a.pC)(t)&&"function"==typeof t?G(w,r,N,c):w,cim:d,materialOverrides:N,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:p,anchorPoint:{x:b,y:C},isAbsoluteAnchorPoint:!1,size:e.size,rotation:F(O,r,"Rotation",c,P),offsetX:F(O,r,"OffsetX",c,M),offsetY:F(O,r,"OffsetY",c,x),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:g,rotateClockwise:e.rotateClockwise,referenceSize:y,sizeRatio:k/(0,l.F2)(e.size),markerPlacement:o};m.push(L)}function Y(e){if(e&&0===e.indexOf("Level_")){const t=parseInt(e.substr(6),10);if(!isNaN(t))return t}return 0}function E(e){if(!e||0===e.length)return null;const t=new i.Z(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function F(e,t,o,i,r,n,a){const l=t[e];if(l){const e=l[o];if("string"==typeof e||"number"==typeof e||e instanceof Array)return n?n.call(null,e,a):e;if(null!=e&&e instanceof c.mz)return(t,o,l)=>{let s=(0,y.Z)(e,t,{$view:l},i.geometryType,o);return null!==s&&n&&(s=n.call(null,s,a)),null!==s?s:r}}return r}function T(e,t,o,i){for(const r of t)if(r.valueExpressionInfo){const e=o[r.primitiveName]&&o[r.primitiveName][r.propertyName];e instanceof c.mz&&(r.fn=(t,o,r)=>(0,y.Z)(e,t,{$view:r},i.geometryType,o))}const n=e=>e?e.charAt(0).toLowerCase()+e.substr(1):e;return(o,i,a)=>{for(const e of t)e.fn&&(e.value=e.fn(o,i,a));const l=[];for(let c of e){var s;const e=null==(s=c)?void 0:s.primitiveName;if(e){let o=!1;for(const i of t)if(i.primitiveName===e){const e=n(i.propertyName);null!=i.value&&i.value!==c[e]&&(o||(c=(0,r.d9)(c),o=!0),c[e]=i.value)}}l.push(c)}return l}}function B(e,t,o,i){const n=[];if(f.E0.findApplicableOverrides(e,t,n),0===n.length)return e;for(const r of n)if(r.valueExpressionInfo){const e=o[r.primitiveName]&&o[r.primitiveName][r.propertyName];e instanceof c.mz&&(r.fn=(t,o,r)=>(0,y.Z)(e,t,{$view:r},i.geometryType,o))}const a=e=>e?e.charAt(0).toLowerCase()+e.substr(1):e;return(t,o,i)=>{for(const e of n)e.fn&&(e.value=e.fn(t,o,i));const l=(0,r.d9)(e),s=e.primitiveName;for(const e of n)if(e.primitiveName===s){const t=a(e.propertyName);null!=e.value&&e.value!==l[t]&&(l[t]=e.value)}return l}}function G(e,t,o,i){for(const r of o)if(r.valueExpressionInfo){const e=t[r.primitiveName]&&t[r.primitiveName][r.propertyName];e instanceof c.mz&&(r.fn=(t,o,r)=>(0,y.Z)(e,t,{$view:r},i.geometryType,o))}return(t,i,r)=>{for(const e of o)e.fn&&(e.value=e.fn(t,i,r));return(0,s.hP)(e+f.E0.buildOverrideKey(o)).toString()}}function U(e,t){if(!t||0===t.length)return e;const o=JSON.parse(JSON.stringify(e));return f.E0.applyOverrides(o,t),o}function W(e,t,o,i){let r=!1,n="";for(const a of e)a.primitiveName===t&&(void 0!==a.value?n+=`-${a.primitiveName}-${a.propertyName}-${JSON.stringify(a.value)}`:a.valueExpressionInfo&&(r=!0));return(0,a.pC)(o)&&"function"==typeof o&&(r=!0),(0,a.pC)(i)&&"function"==typeof i&&(r=!0),[r,n]}function D(e,t,o){if(e&&t)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const i=e.symbolLayers;if(!i)return;for(const e of i)switch(V(e,t,o),e.type){case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMCharacterMarker":case"CIMPictureMarker":"url"in e&&e.url&&o.push(t.fetchResource(e.url,null));break;case"CIMVectorMarker":{const i=e.markerGraphics;if(!i)continue;for(const e of i)if(e){const i=e.symbol;i&&D(i,t,o)}}}}}}const Z=e=>e&&2===e.length&&e[0].enable&&e[1].enable&&"CIMSolidStroke"===e[0].type&&"CIMSolidFill"===e[1].type&&!e[0].effects&&!e[1].effects;let j;function V(e,t,o){e.effects&&!(0,a.pC)(t.geometryEngine)&&(j?o.push(j):(0,h.Cc)(e.effects)&&(j=(0,h.RI)(),o.push(j),j.then((e=>t.geometryEngine=e))))}},95954:(e,t,o)=>{o.d(t,{j:()=>l});var i=o(77981),r=o(25290),n=o(35747),a=o(7313);class l{static executeEffects(e,t,o){const i=(0,r.GP)(t);let l=new n.M(i);for(const r of e){const e=(0,a.h)(r);e&&(l=e.execute(l,r,1.3333333333333333,o))}return l}static next(e){const t=e.next();return(0,r.wp)(t),t}static applyEffects(e,t,o){if(!e)return t;let r=new n.M(t);for(const i of e){const e=(0,a.h)(i);e&&(r=e.execute(r,i,1,o))}let l,s=null;for(;l=r.next();)s?(0,i.l9)(s)?(0,i.l9)(l)&&s.paths.push(...l.paths):(0,i.oU)(s)&&(0,i.oU)(l)&&s.rings.push(...l.rings):s=l;return s}}},91935:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(10064),r=o(32718),n=o(58971);function a(e,t,o,i,n){const a=e.referencesGeometry()&&n?s(t,i,n):t,l=e.repurposeFeature(a);try{return e.evaluate({...o,$feature:l})}catch(c){return r.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",c),null}}const l=new Map;function s(e,t,o){const{transform:a,hasZ:s,hasM:c}=o;l.has(t)||l.set(t,function(e){const t={};switch(e){case"esriGeometryPoint":return(e,o,i,r)=>(0,n.U1)(o,t,e,i,r);case"esriGeometryPolygon":return(e,o,i,r)=>(0,n.Ie)(o,t,e,i,r);case"esriGeometryPolyline":return(e,o,i,r)=>(0,n.G6)(o,t,e,i,r);case"esriGeometryMultipoint":return(e,o,i,r)=>(0,n.J9)(o,t,e,i,r);default:return r.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new i.Z("mapview-arcade",`Unable to handle geometryType: ${e}`)),e=>e}}(t));const f=l.get(t)(e.geometry,a,s,c);return{...e,geometry:f}}},88750:(e,t,o)=>{o.d(t,{BN:()=>i,Yc:()=>r});function i(e){const t=e.toLowerCase().split(" ").join("-");switch(t){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return t}}function r(e){const t=function(e){if(!e.weight)return"";switch(e.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}(e)+function(e){if(!e.style)return"";switch(e.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}(e);return i(e.family)+(t.length>0?t:"-regular")}}}]);
//# sourceMappingURL=9815.f05f4c1a.chunk.js.map