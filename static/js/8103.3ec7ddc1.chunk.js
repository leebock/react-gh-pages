"use strict";(globalThis.webpackChunkreact_gh_pages=globalThis.webpackChunkreact_gh_pages||[]).push([[8103],{8103:(e,t,l)=>{l.r(t),l.d(t,{previewSymbol2D:()=>b});var a=l(51995),n=l(10064),i=l(17842),s=l(79563),o=l(37817),c=l(1682);const u="picture-fill",m=o.b_.size,r=o.b_.maxSize,h=o.b_.maxOutlineSize,d=o.b_.lineWidth,p=document.createElement("canvas");function v(e,t){const l=p.getContext("2d"),a=[];return t&&(t.weight&&a.push(t.weight),t.size&&a.push(t.size+"px"),t.family&&a.push(t.family)),l.font=a.join(" "),l.measureText(e).width}function f(e){if(0===e.length)return 0;if(e.length>2){const t=(0,i.Wz)(1),l=parseFloat(e);switch(e.slice(-2)){case"px":return l;case"pt":return l*t;case"in":return 72*l*t;case"pc":return 12*l*t;case"mm":return 2.8346456692913384*l*t;case"cm":return 28.346456692913385*l*t}}return parseFloat(e)}function y(e){const t=null==e?void 0:e.size;return{width:null!=t&&"object"==typeof t&&"width"in t?(0,i.F2)(t.width):null,height:null!=t&&"object"==typeof t&&"height"in t?(0,i.F2)(t.height):null}}function b(e,t){var l,p;const b="number"==typeof(null==t?void 0:t.size)?null==t?void 0:t.size:null,g=null!=b?(0,i.F2)(b):null,w=null!=(null==t?void 0:t.maxSize)?(0,i.F2)(t.maxSize):null,M=null!=(null==t?void 0:t.opacity)?t.opacity:null,k=null!=(null==t?void 0:t.rotation)?t.rotation:"angle"in e?e.angle:null,x=(0,s._M)(e);let L=(0,s.mx)(e);if(x&&!L){const e="type"in x?null:new a.Z(x);"#ffffff"===(e?e.toHex():null)&&(L={color:"#bdc3c7",width:.75})}const z={shape:null,fill:null,stroke:L,offset:[0,0]};null!=(l=L)&&l.width&&(L.width=Math.min(L.width,h));const F=(null==(p=L)?void 0:p.width)||0;let C=null!=(null==t?void 0:t.size)&&(null==(null==t?void 0:t.scale)||(null==t?void 0:t.scale)),_=0,S=0,Z=!1;switch(e.type){case"simple-marker":{const t=e.style,l=Math.min(null!=g?g:(0,i.F2)(e.size),w||r);switch(_=l,S=l,t){case"circle":z.shape={type:"circle",cx:0,cy:0,r:.5*l},C||(_+=F,S+=F);break;case"cross":z.shape={type:"path",path:[{command:"M",values:[0,.5*S]},{command:"L",values:[_,.5*S]},{command:"M",values:[.5*_,0]},{command:"L",values:[.5*_,S]}]};break;case"diamond":z.shape={type:"path",path:[{command:"M",values:[0,.5*S]},{command:"L",values:[.5*_,0]},{command:"L",values:[_,.5*S]},{command:"L",values:[.5*_,S]},{command:"Z",values:[]}]},C||(_+=F,S+=F);break;case"square":z.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[_,0]},{command:"L",values:[_,S]},{command:"L",values:[0,S]},{command:"Z",values:[]}]},C||(_+=F,S+=F),k&&(Z=!0);break;case"triangle":z.shape={type:"path",path:[{command:"M",values:[.5*_,0]},{command:"L",values:[_,S]},{command:"L",values:[0,S]},{command:"Z",values:[]}]},C||(_+=F,S+=F),k&&(Z=!0);break;case"x":z.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[_,S]},{command:"M",values:[_,0]},{command:"L",values:[0,S]}]},k&&(Z=!0);break;case"path":z.shape={type:"path",path:e.path||""},C||(_+=F,S+=F),k&&(Z=!0),C=!0}break}case"simple-line":{var j;const{width:e,height:l}=y(t),a=null!=l?l:Math.min(null!=g?g:F,w||h),n=null!=e?e:d;L.width=a,_=n,S=a;const i=(null==z||null==(j=z.stroke)?void 0:j.cap)||"butt",s="round"===i;C=!0,z.stroke.cap="butt"===i?"square":i,z.shape={type:"path",path:[{command:"M",values:[s?a/2:0,S/2]},{command:"L",values:[s?_-a/2:_,S/2]}]};break}case u:case"simple-fill":{const e="object"==typeof(null==t?void 0:t.symbolConfig)&&(null==t?void 0:t.symbolConfig.isSquareFill),{width:l,height:a}=y(t);_=e&&null!=l?l:null!=g?g:m,S=e&&null!=a?a:_,C||(_+=F,S+=F),C=!0,z.shape=e?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[_,0]},{command:"L",values:[_,S]},{command:"L",values:[0,S]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:o.JZ.fill[0];break}case"picture-marker":{let t=(0,i.F2)(e.width),l=(0,i.F2)(e.height);const a=null!=g?g:Math.max(t,l),n=t/l;t=n<=1?Math.ceil(a*n):a,l=n<=1?a:Math.ceil(a/n),_=Math.min(t,w||r),S=Math.min(l,w||r),z.shape={type:"image",x:-Math.round(_/2),y:-Math.round(S/2),width:_,height:S,src:e.url||""},k&&(Z=!0);break}case"text":{const t=e,l=t.text||"Aa",a=t.font,n=Math.min(null!=g?g:(0,i.F2)(a.size),w||r),s=v(l,{weight:a.weight,size:n,family:a.family}),o=/[\uE600-\uE6FF]/.test(l);_=o?n:s,S=n;let c=.25*f((a?n:0).toString());o&&(c+=5),z.shape={type:"text",text:l,x:0,y:c,align:"middle",decoration:a&&a.decoration,rotated:t.rotated,kerning:t.kerning},z.font=a&&{size:n,style:a.style,decoration:a.decoration,weight:a.weight,family:a.family};break}}if(!z.shape)return Promise.reject(new n.Z("symbolPreview: renderPreviewHTML2D","symbol not supported."));const P=x,T=e.color;let q=null;return P&&"pattern"===P.type&&T&&e.type!==u?q=(0,s.Od)(P.src,T.toCss(!0)).then((e=>(P.src=e,z.fill=P,z))):(z.fill=x,q=Promise.resolve(z)),q.then((e=>{const l=[[e]];if("object"==typeof(null==t?void 0:t.symbolConfig)&&null!=t&&t.symbolConfig.applyColorModulation){const t=.6*_;l.unshift([{...e,offset:[-t,0],fill:(0,o.dc)(x,-.3)}]),l.push([{...e,offset:[t,0],fill:(0,o.dc)(x,.3)}]),_+=2*t,C=!1}return(0,c.w)(l,[_,S],{node:t&&t.node,scale:C,opacity:M,rotation:k,useRotationSize:Z,effectView:null==t?void 0:t.effectView})}))}}}]);
//# sourceMappingURL=8103.3ec7ddc1.chunk.js.map